Execute intelligent project context refresh with selective updates and knowledge preservation: $ARGUMENTS

## Explicit Instructions

This command accomplishes the following specific objectives:

1. **Perform selective context analysis** identifying specific project changes requiring documentation updates while preserving stable architectural and process knowledge
2. **Execute targeted context refresh** updating only stale or changed sections without losing accumulated project wisdom and team patterns
3. **Propagate context updates** to active tasks ensuring all workflow participants have current project understanding
4. **Validate context accuracy** confirming updated context reflects actual project state and team practices

## Context and Motivation

This command is essential for maintaining project intelligence because:

- **Knowledge Currency**: Ensures project context remains accurate and reflects current architecture, tools, and team practices
- **Efficiency**: Selective updates preserve valuable accumulated knowledge while refreshing only changed elements
- **Team Alignment**: Propagated updates ensure all active tasks operate with current project understanding
- **Quality Assurance**: Fresh context improves analysis quality and solution appropriateness

## Execution Process

Execute these operations concurrently for intelligent context refresh:

### Change Detection and Analysis

1. **Analyze project structure changes** comparing current state with last context generation timestamp
2. **Identify dependency modifications** in package.json, requirements.txt, Gemfile, or other dependency management files
3. **Detect architectural evolution** including new services, API changes, database modifications, or infrastructure updates
4. **Assess process and tooling changes** in CI/CD configuration, testing approaches, or development workflow modifications

### Selective Context Update Strategy

1. **Preserve stable context elements** including established team patterns, proven architectural decisions, and mature process workflows
2. **Update changed context sections** with current dependency versions, new service integrations, and evolved architectural patterns
3. **Validate context consistency** ensuring updated sections integrate coherently with preserved knowledge
4. **Document context evolution** tracking what changed and why for future reference

### Active Task Context Propagation

1. **Identify active tasks** requiring context updates based on scope and dependency overlap
2. **Analyze context impact** determining which tasks benefit from refreshed context versus stable context preservation
3. **Coordinate context updates** with task phases ensuring appropriate timing for context integration
4. **Validate task context coherence** confirming active tasks maintain consistency with refreshed project understanding

## Expected Outputs

Generate comprehensive context refresh report using this exact XML schema:

<command_output>
<context_refresh_metadata>
<refresh_timestamp>ISO 8601 timestamp of context refresh execution</refresh_timestamp>
<last_context_update>Timestamp of previous context generation or refresh</last_context_update>
<refresh_scope>full|selective|targeted</refresh_scope>
<refresh_triggers>List of changes that triggered this refresh</refresh_triggers>
</context_refresh_metadata>

<change_detection_analysis>
<project_structure_changes>
<new_directories>Newly created directories and their purpose</new_directories>
<removed_components>Removed files or directories and impact assessment</removed_components>
<reorganization>File or directory structure reorganization</reorganization>
</project_structure_changes>
<dependency_modifications>
<added_dependencies>New dependencies added and their integration purpose</added_dependencies>
<updated_dependencies>Updated dependency versions and compatibility impact</updated_dependencies>
<removed_dependencies>Removed dependencies and cleanup implications</removed_dependencies>
<security_updates>Security-related dependency updates and vulnerability fixes</security_updates>
</dependency_modifications>
<architectural_evolution>
<new_services>New services or components added to the system</new_services>
<api_modifications>API contract changes, new endpoints, or deprecations</api_modifications>
<database_changes>Database schema modifications, new tables, or migrations</database_changes>
<infrastructure_updates>Infrastructure, deployment, or environment configuration changes</infrastructure_updates>
</architectural_evolution>
<process_tooling_changes>
<cicd_modifications>CI/CD pipeline changes, new tools, or workflow updates</cicd_modifications>
<testing_evolution>Testing framework changes, new test types, or coverage improvements</testing_evolution>
<development_tools>New development tools, IDE configurations, or productivity enhancements</development_tools>
<team_practices>Team process changes, code review updates, or collaboration improvements</team_practices>
</process_tooling_changes>
</change_detection_analysis>

<context_update_strategy>
<preserved_knowledge>
<stable_architecture>Architectural patterns and decisions that remain current</stable_architecture>
<team_patterns>Established team practices and communication patterns</team_patterns>
<proven_approaches>Validated technical approaches and implementation patterns</proven_approaches>
<institutional_knowledge>Accumulated project wisdom and lessons learned</institutional_knowledge>
</preserved_knowledge>
<updated_sections>
<technology_stack>Updated technology stack information and version compatibility</technology_stack>
<integration_patterns>Modified integration approaches and system communication</integration_patterns>
<deployment_processes>Updated deployment procedures and environment configuration</deployment_processes>
<quality_standards>Evolved quality standards, testing requirements, and validation approaches</quality_standards>
</updated_sections>
<context_validation>
<consistency_checks>Validation that updated context maintains internal consistency</consistency_checks>
<accuracy_verification>Confirmation that context reflects actual project state</accuracy_verification>
<completeness_assessment>Assessment of context coverage and any identified gaps</completeness_assessment>
</context_validation>
</context_update_strategy>

<active_task_impact_analysis>
<task_context_assessment>
<affected_tasks>Tasks requiring context updates based on scope overlap</affected_tasks>
<stable_tasks>Tasks where stable context is more appropriate</stable_tasks>
<critical_updates>Tasks where context updates are essential for quality</critical_updates>
</task_context_assessment>
<propagation_strategy>
<immediate_updates>Tasks requiring immediate context refresh</immediate_updates>
<scheduled_updates>Tasks where context updates can be scheduled appropriately</scheduled_updates>
<preservation_decisions>Tasks where current context should be preserved</preservation_decisions>
</propagation_strategy>
<impact_mitigation>
<workflow_continuity>Ensuring context updates don't disrupt active task workflows</workflow_continuity>
<quality_maintenance>Maintaining task analysis and planning quality during updates</quality_maintenance>
<team_coordination>Coordinating context updates with team workflow and availability</team_coordination>
</impact_mitigation>
</active_task_impact_analysis>

<context_evolution_tracking>
<change_documentation>
<architectural_evolution>Documentation of architectural changes and their rationale</architectural_evolution>
<technology_adoption>New technology adoption decisions and integration approaches</technology_adoption>
<process_improvements>Team process evolution and workflow optimizations</process_improvements>
</change_documentation>
<knowledge_preservation>
<decision_history>Historical record of major project decisions and context</decision_history>
<pattern_evolution>Evolution of successful patterns and approaches over time</pattern_evolution>
<lessons_learned>Accumulated lessons and their influence on current context</lessons_learned>
</knowledge_preservation>
<future_context_planning>
<context_maintenance>Recommendations for ongoing context maintenance and refresh timing</context_maintenance>
<automation_opportunities>Opportunities for automated context refresh and validation</automation_opportunities>
<knowledge_management>Strategies for preserving and accessing accumulated project knowledge</knowledge_management>
</future_context_planning>
</context_evolution_tracking>

<refresh_deliverables>
<updated_context_file>Path to refreshed .claude/project-context.md file</updated_context_file>
<change_summary>Summary document of context changes and their rationale</change_summary>
<propagation_plan>Plan for propagating context updates to active tasks</propagation_plan>
<validation_checklist>Checklist for validating context accuracy and completeness</validation_checklist>
</refresh_deliverables>
</command_output>

## Context Refresh Triggers

### Dependency and Technology Changes

**High-Impact Triggers:**

- Major framework version updates
- New technology stack adoption
- Security vulnerability remediation
- Architecture pattern modifications

**Medium-Impact Triggers:**

- Minor dependency version updates
- Development tool additions
- Testing framework enhancements
- CI/CD pipeline optimizations

### Architectural and Infrastructure Evolution

**Structural Changes:**

- New service or component introduction
- Database schema modifications
- API contract changes or new endpoints
- Infrastructure or deployment updates

**Pattern Evolution:**

- New coding patterns adoption
- Integration approach modifications
- Error handling or logging improvements
- Performance optimization strategies

### Team Process and Workflow Updates

**Development Process:**

- Code review procedure changes
- Testing approach evolution
- Documentation standard updates
- Quality gate modifications

**Collaboration Improvements:**

- Communication pattern changes
- Tool adoption for productivity
- Workflow automation enhancements
- Knowledge sharing improvements

## Selective Update Strategy

### Elements to Preserve

- **Proven Architectural Decisions**: Well-established patterns that continue to serve the project effectively
- **Stable Team Practices**: Mature processes and communication patterns that provide consistent value
- **Institutional Knowledge**: Accumulated wisdom about project-specific challenges and effective solutions
- **Historical Context**: Decision rationale and evolution that provides valuable background for future decisions

### Elements to Update

- **Technology Versions**: Current dependency versions and compatibility requirements
- **Integration Points**: Modified system integrations and communication patterns
- **Development Tools**: Updated tooling and development environment configuration
- **Quality Standards**: Evolved testing, validation, and quality assurance approaches

### Elements to Validate

- **Context Accuracy**: Verification that documented context matches actual project state
- **Pattern Effectiveness**: Confirmation that documented patterns remain optimal for current project needs
- **Team Alignment**: Validation that context reflects current team practices and preferences
- **Completeness**: Assessment of context coverage and identification of any gaps

## Success Criteria

- Accurate identification of all significant project changes since last context update
- Selective context refresh preserving valuable knowledge while updating changed elements
- Successful propagation of context updates to relevant active tasks
- Validated context accuracy ensuring documentation reflects actual project state
- Maintained workflow continuity with minimal disruption to active development work
